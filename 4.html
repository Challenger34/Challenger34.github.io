<!DOCTYPE html>
<html>
<head>
  <title>Weather</title>
</head>
<body>
<style>

html{
  background-color: skyblue;
}

#temp{
   position:absolute;  
   transition: .5s ease;
   left: 10%;
   top: 25%;
   font-family: cursive;
   font-size: 40px;
   color: #800020;
}

#icon{
   position:absolute;  
   transition: .5s ease;
   left: 8.5%;
   top: 8%;
}

#info{
   position:absolute;  
   transition: .5s ease;
   left: 22%;
   top: 13%;
   width: 250px;
   line-height: 200%
}

.info{
   font-family: cursive;
   font-size: 19px;
   color: #800020;
}


#desc{
   font-family: cursive;
   font-size: 19px;
   color: #800020;
}

#q{
   position:absolute;  
   transition: .5s ease;
   left: 5%;
   top: 35%;
   height: 25px;
   font-size: 15px;
   font-family: cursive;
   color: skyblue;
   background-color: rgba(0,0,0,0.4);
   font-style: italic;
   border: solid 1px #707070;
   box-shadow: 0 0 5px 1px #969696;
}

#map {
   position:absolute;  
   transition: .5s ease;
   left: 5%;
   top: 40%;
   height: 400px;
   width: 50%;
   margin-bottom: 20px;
   margin-top: 10px;
 }

img.expand {
    width: 10em; 
}



</style>

<link rel="stylesheet" type="text/css" href="index.css">
<nav>
    <ul>
        <li><a href="home.html">Home</a></li>
        <li>
            <a href="#">Forecast &#9662;</a>
            <ul class="dropdown">
                <li><a href="home.html" id="d0"></a></li>
                <li><a href="1.html" id="d1"></a></li>
                <li><a href="2.html" id="d2"></a></li>
                <li><a href="3.html" id="d3"></a></li>
                <li><a href="4.html" id="d4"></a></li>
                <li><a href="5.html" id="d5"></a></li>
                <li><a href="6.html" id="d6"></a></li>
                <li><a href="7.html" id="d7"></a></li>
                <li><a href="8.html" id="d8"></a></li>
                <li><a href="9.html" id="d9"></a></li>
                <li><a href="10.html" id="d10"></a></li>
                <li><a href="11.html" id="d11"></a></li>
                <li><a href="12.html" id="d12"></a></li>
                <li><a href="13.html" id="d13"></a></li>
            </ul>
        </li>
    </ul>
</nav>

<nav id="desc"></nav>

<input type="text" id="q" placeholder="Location">

<!--The start of the navs-->
<nav id="map"></nav>
<nav id="temp"></nav>
<nav id="icon"></nav>
<fieldset id="info">
<legend>Extra Information</legend>
<nav id="info0" class="info"></nav>
<nav id="info1" class="info"></nav>
<nav id="info2" class="info"></nav>
<nav id="info3" class="info"></nav>
</fieldset>
<!--The end of the navs-->



<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCNWPoPsIEmUEazbUy-S7d6otr2YxFPJUU&callback=initMap">
</script>
<script>
/*
var r = $.get("http://api.openweathermap.org/data/2.5/weather?q=Newton,ma&APPID=ff20168398af0336f31ec634073a9303&units=imperial")
var a = r.responseJSON
*/


function initMap(o) {
  var place = o
  var map = new google.maps.Map(document.getElementById('map'), {
    zoom: 4,
    center: place
  });
  var marker = new google.maps.Marker({
    position: place,
    map: map
  });
}

function strftime(sFormat, date) {
  if (!(date instanceof Date)) date = new Date();
  var nDay = date.getDay(),
    nDate = date.getDate(),
    nMonth = date.getMonth(),
    nYear = date.getFullYear(),
    nHour = date.getHours(),
    aDays = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],
    aMonths = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
    aDayCount = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334],
    isLeapYear = function() {
      if ((nYear&3)!==0) return false;
      return nYear%100!==0 || nYear%400===0;
    },
    getThursday = function() {
      var target = new Date(date);
      target.setDate(nDate - ((nDay+6)%7) + 3);
      return target;
    },
    zeroPad = function(nNum, nPad) {
      return ('' + (Math.pow(10, nPad) + nNum)).slice(1);
    };
  return sFormat.replace(/%[a-z]/gi, function(sMatch) {
    return {
      '%a': aDays[nDay].slice(0,3),
      '%A': aDays[nDay],
      '%b': aMonths[nMonth].slice(0,3),
      '%B': aMonths[nMonth],
      '%c': date.toUTCString(),
      '%C': Math.floor(nYear/100),
      '%d': zeroPad(nDate, 2),
      '%e': nDate,
      '%F': date.toISOString().slice(0,10),
      '%G': getThursday().getFullYear(),
      '%g': ('' + getThursday().getFullYear()).slice(2),
      '%H': zeroPad(nHour, 2),
      '%I': zeroPad((nHour+11)%12 + 1, 2),
      '%j': zeroPad(aDayCount[nMonth] + nDate + ((nMonth>1 && isLeapYear()) ? 1 : 0), 3),
      '%k': '' + nHour,
      '%l': (nHour+11)%12 + 1,
      '%m': zeroPad(nMonth + 1, 2),
      '%M': zeroPad(date.getMinutes(), 2),
      '%p': (nHour<12) ? 'AM' : 'PM',
      '%P': (nHour<12) ? 'am' : 'pm',
      '%s': Math.round(date.getTime()/1000),
      '%S': zeroPad(date.getSeconds(), 2),
      '%u': nDay || 7,
      '%V': (function() {
              var target = getThursday(),
                n1stThu = target.valueOf();
              target.setMonth(0, 1);
              var nJan1 = target.getDay();
              if (nJan1!==4) target.setMonth(0, 1 + ((4-nJan1)+7)%7);
              return zeroPad(1 + Math.ceil((n1stThu-target)/604800000), 2);
            })(),
      '%w': '' + nDay,
      '%x': date.toLocaleDateString(),
      '%X': date.toLocaleTimeString(),
      '%y': ('' + nYear).slice(2),
      '%Y': nYear,
      '%z': date.toTimeString().replace(/.+GMT([+-]\d+).+/, '$1'),
      '%Z': date.toTimeString().replace(/.+\((.+?)\)$/, '$1')
    }[sMatch] || sMatch;
  });
}



function navio(argument) {
    var d0 = new Date();
    var d1 = new Date(d0.getTime() + (24 * 60 * 60 * 1000)) 
    var d2 = new Date(d1.getTime() + (24 * 60 * 60 * 1000))
    var d3 = new Date(d2.getTime() + (24 * 60 * 60 * 1000)) 
    var d4 = new Date(d3.getTime() + (24 * 60 * 60 * 1000))
    var d5 = new Date(d4.getTime() + (24 * 60 * 60 * 1000))
    var d6 = new Date(d5.getTime() + (24 * 60 * 60 * 1000))
    var d7 = new Date(d6.getTime() + (24 * 60 * 60 * 1000))
    var d8 = new Date(d7.getTime() + (24 * 60 * 60 * 1000))
    var d9 = new Date(d8.getTime() + (24 * 60 * 60 * 1000))
    var d10 = new Date(d9.getTime() + (24 * 60 * 60 * 1000))
    var d11 = new Date(d10.getTime() + (24 * 60 * 60 * 1000))
    var d12 = new Date(d11.getTime() + (24 * 60 * 60 * 1000))
    var d13 = new Date(d12.getTime() + (24 * 60 * 60 * 1000))

    $(" #d0 ").text(strftime('%a, %b %e, %Y', d0))
    $(" #d1 ").text(strftime('%a, %b %e, %Y', d1))
    $(" #d2 ").text(strftime('%a, %b %e, %Y', d2))
    $(" #d3 ").text(strftime('%a, %b %e, %Y', d3))
    $(" #d4 ").text(strftime('%a, %b %e, %Y', d4))
    $(" #d5 ").text(strftime('%a, %b %e, %Y', d5))
    $(" #d6 ").text(strftime('%a, %b %e, %Y', d6))
    $(" #d7 ").text(strftime('%a, %b %e, %Y', d7))
    $(" #d8 ").text(strftime('%a, %b %e, %Y', d8))
    $(" #d9 ").text(strftime('%a, %b %e, %Y', d9))
    $(" #d10 ").text(strftime('%a, %b %e, %Y', d10))
    $(" #d11 ").text(strftime('%a, %b %e, %Y', d11))
    $(" #d12 ").text(strftime('%a, %b %e, %Y', d12))
    $(" #d13 ").text(strftime('%a, %b %e, %Y', d13))



}

navio()

function run(q){
var xhr = new XMLHttpRequest();
xhr.onreadystatechange = process;
xhr.open("GET", "http://api.openweathermap.org/data/2.5/forecast/daily?q=" + q + "&cnt=14&mode=json&APPID=ff20168398af0336f31ec634073a9303&units=imperial", true);
xhr.send();
function process()
{
  if (xhr.readyState == 4) {
    var x = JSON.parse(xhr.responseText);


var humidity = x.list[3].humidity
var wind_speed = x.list[3].speed
var max_temp = x.list[3].temp.morn
var min_temp = x.list[3].temp.eve
var desc = x.list[3].weather[0].description




initMap({ lat: x.city.coord.lat, lng: x.city.coord.lon })

document.getElementById("desc").innerText = "Weather for " + q + ": " + desc



var info = ["Humidity: " + humidity + "%", "Wind Speed: " + wind_speed + " MPH", "Morning Tempreture: " + parseInt(max_temp) +  unescape('%B0') +
  "F.","Evening Tempreture: " + parseInt(min_temp) +  unescape('%B0') +
  "F."]


for (var i = 0; i < info.length; i++) {
  $("#info" + i).text(info[i])
};

$(" #temp ").text(x.list[3].temp.day + unescape('%B0') +"F.")


document.getElementById('icon').innerHTML = '<img src="http://openweathermap.org/img/w/' + x.list[3].weather[0].icon + '.png" class="expand">'



}


}
}






function runo(q, p){
var xhr = new XMLHttpRequest();
xhr.onreadystatechange = process;
xhr.open("GET", "http://api.openweathermap.org/data/2.5/forecast/daily?lat=" + q + "&lon=" + p + "&cnt=14&mode=json&APPID=ff20168398af0336f31ec634073a9303&units=imperial", true);
xhr.send();
function process()
{
  if (xhr.readyState == 4) {
    var x = JSON.parse(xhr.responseText);


var humidity = x.list[3].humidity
var wind_speed = x.list[3].speed
var max_temp = x.list[3].temp.morn
var min_temp = x.list[3].temp.eve
var desc = x.list[3].weather[0].description




initMap({ lat: x.city.coord.lat, lng: x.city.coord.lon })

document.getElementById("desc").innerText = "Weather for " + q + ": " + desc[0].toUpperCase() + desc.slice(1)



var info = ["Humidity: " + humidity + "%", "Wind Speed: " + wind_speed + " MPH", "Morning Tempreture: " + parseInt(max_temp) +  unescape('%B0') +
  "F.","Evening Tempreture: " + parseInt(min_temp) +  unescape('%B0') +
  "F."]


for (var i = 0; i < info.length; i++) {
  $("#info" + i).text(info[i])
};

$(" #temp ").text(x.list[3].temp.day + unescape('%B0') +"F.")


document.getElementById('icon').innerHTML = '<img src="http://openweathermap.org/img/w/' + x.list[3].weather[0].icon + '.png" class="expand">'



}


}
}





function main(k) {
  if (k.keyCode === 13){ run($(" #q ").val()); $(" #q ").val("")}
}



navigator.geolocation.getCurrentPosition(function(position) {
  runo(position.coords.latitude, position.coords.longitude);
});


document.addEventListener("keydown", main, false)

</script>
</body>
</html>